---
description: 公司設計系統總則。含 tokens、Admin/Platform 元件與網格、從 Figma 實作公司產品時的流程與驗收。代表公司的產品一律使用 .cursor/company-design-system/all-variables.css。
globs: "**/*.html,**/*.css,**/*.tsx,**/*.jsx,.cursor/company-design-system/**,image/**"
alwaysApply: false
---

# 公司設計系統（Company Design System）

**適用對象**：  
- **代表公司的產品**（POC、admin、platform、後台、管理介面）：依本規則的 token、Admin 規格與 Figma 實作流程。

**原則**：一律使用設計系統的 tokens、元件規格與版面規範，**禁止**硬編碼色碼、魔術數字或偏離既有元件規格。  
**介面文案（UX writing）**：須遵守 **`.cursor/company-design-system/ux-writing.md`**（日文／英文必讀文件路徑與 voice/tone 見該檔）。

---

## 一、Design Tokens 來源與優先順序

### 1.1 公司產品（POC、admin、platform）— 必用

- **唯一 token 來源**：專案內 **`.cursor/company-design-system/all-variables.css`**。  
- 實作時必須引入此檔案，所有顏色、間距、圓角、字級等皆使用檔案內變數。

**Token 使用優先順序（嚴格遵守）：**

```
1. --sem-*            ← 優先使用（語意化 token）
2. --tokens-*         ← 元件專用 token
3. --spacing-*, --radius-*  ← 間距、圓角
4. --colors-*         ← 僅在無上述對應時使用
❌ 禁止：硬編碼色碼、px 色值、#xxx
```

**常用對照：**

| 用途 | ✅ 使用 | ❌ 禁止 |
|------|--------|--------|
| 主按鈕背景 | `var(--sem-btn-primary-bg)` | `--colors-blue-9`、`#0090ff` |
| 危險按鈕 | `var(--sem-btn-danger-bg)` | `--colors-red-9` |
| 頁面背景 | `var(--sem-bg-canvas)` | `#f5f5f5`、`white` |
| 卡片/表層 | `var(--sem-layer-1)` | `white` |
| 主要文字 | `var(--sem-text-primary)` | `--colors-gray-alpha-12` |
| 邊框 | `var(--sem-border-default)` | `--colors-gray-alpha-6` |

---

## 二、從 Figma 實作公司產品時

### 2.1 Figma 連結解析

- **fileKey** 與 **nodeId** 從 Figma 連結取得（例：`https://figma.com/design/{fileKey}/{fileName}?node-id={nodeId}`）。
- 傳入工具時，`node-id` 的 `-` 須改為 `:`（例：`4585-2` → `4585:2`）。

### 2.2 必跑流程（不可省略）

從 Figma 實作或調整公司產品 UI 時依序執行：

1. **取得設計脈絡**：`get_design_context(fileKey, nodeId)`；過大時先 `get_metadata` 再對子節點取 context。
2. **取得視覺參考**：`get_screenshot(fileKey, nodeId)` 作為實作與驗收依據。
3. **下載素材**：依 Figma 回傳的圖片/SVG 下載；若有 localhost 來源則直接使用，不替換為其他圖庫。存放於專案 `image/` 或既有約定目錄。
4. **對應 token 並實作**：將 Figma 的顏色、間距、字級對應到 **`.cursor/company-design-system/all-variables.css`** 的 `--sem-*` / `--tokens-*` / `--spacing-*` / `--radius-*` / `--colors-*`。Figma MCP 若產出 React/Tailwind，僅作設計與結構參考，最終產出依專案技術棧。
5. **驗收**：對照截圖檢查版面、字型、顏色、間距與互動狀態；確認皆使用公司 token，無硬編碼。

### 2.3 技術棧與實作原則（從 Figma 實作時）

- **標記**：HTML5；公司產品依專案可能為 React/TSX 等。
- **樣式**：原生 CSS，使用 `:root` 或設計系統的 CSS 變數；公司產品引入 `all-variables.css`。
- **字型**：Noto Sans TC（400/500/600/700），依專案引入。
- **重用**：先檢查既有 class，能沿用就沿用或擴充。
- **元件與無障礙**：依設計系統階層與語意使用標籤（`button`、`nav`、`section`），必要時加 `aria-*`、`role`。
- **視覺**：以 Figma 截圖為準，達成 1:1 視覺與狀態（hover、active、disabled）。
- **素材**：不隨意新增 icon 套件；以 Figma 設計稿或 MCP 回傳資源為準。Class 命名維持小寫連字號。

---

## 三、核心元件規格（Admin / Platform，公司產品）

以下為公司統一規格，所有 admin、platform、後台類介面必須一致。

### Sidebar（側邊導航）

| 項目 | 規格 |
|------|------|
| 寬度（展開） | **256px** |
| 寬度（收合） | **64px** |
| 背景 | **`var(--colors-sand-1)`** (#fdfdfc) |
| 右邊框 | **`var(--colors-sand-3)`** (#f1f2f2) |
| 收合時 Tooltip | 位置 left: 64px；背景 `var(--colors-sand-12)`；文字 `var(--tokens-colors-white-contrast)`；字級 13px、字重 500；padding 8px 12px；圓角 4px；距側欄 8px；**動畫 150ms ease 淡入**；無箭頭；內容為選單標籤 |

### Top Header（頂列）

| 項目 | 規格 |
|------|------|
| 高度 | **56px** |
| 背景 | **`var(--colors-sand-1)`** (#fdfdfc) |
| 底邊框 | `var(--colors-gray-alpha-6)` |

### Drawer（抽屜表單）

| 項目 | 規格 |
|------|------|
| 寬度 | **720px** |
| 背景 | **`var(--colors-sand-1)`** (#fdfdfc) |
| 陰影 | `-4px 0 12px rgba(0,0,0,0.1)` |

### Dialog 寬度

| 類型 | 寬度 |
|------|------|
| Small | 400px |
| Medium | 600px |
| Large | 800px |

---

## 四、Admin 版面網格（公司產品）

- **全域容器**：max-width 1440px；水平 padding 24px（`--sem-space-6`）；垂直間距 `--sem-space-8`。
- **Desktop（≥1024px）**：12 欄；欄寬 32px；gap 20px。**允許 span 僅：12 / 8 / 6 / 4 / 3**。
- **主內容區**：8–12 欄；**側邊面板**：3–4 欄；**表單欄位**：12（全幅）/ 6（半幅）/ 4（三分之一）。
- **表格**：佔滿容器（span 12）；操作欄 80–120px、右對齊；溢位時水平捲動。
- **RWD**：Mobile &lt;768px 單欄；Tablet 768–1023 為 8 欄；Desktop ≥1024 為 12 欄。
- **垂直間距**：大區塊 `--sem-space-8`（48px）；相關群組 `--sem-space-6`（32px）；表單欄位間 `--sem-space-4`（16px）。
- **Sidebar 行為**：Desktop 展開 256px / 收合 64px；Mobile 為 overlay drawer + backdrop。

---

## 五、參考資源路徑

| 用途 | 路徑 |
|------|------|
| 公司 Design tokens（必用） | `.cursor/company-design-system/all-variables.css` |
| 規格更新與檢查表 | `.cursor/company-design-system/Claude-design-system-updates-2026-02-20.md` |
| **UX writing**（介面文案，日／英必讀文件路徑） | **`.cursor/company-design-system/ux-writing.md`** |
| Platform 範例（layout、表格、表單、Dialog） | `docs/design-examples/Platform example` |

Platform 範例含：登入、Sidebar 展開/收合、Drawer、平台主畫面+表格、Dialog / Alert Dialog。實作 admin/platform 時須與其 layout、導航、表格、表單、對話框模式一致。

---

## 六、驗收檢查表

### 公司產品（admin/platform）完成前必對

- [ ] Sidebar 寬度 256px（展開）/ 64px（收合）
- [ ] Header 高度 56px
- [ ] 背景色使用 `var(--colors-sand-1)`（或 `--sem-bg-canvas` 等語意 token）
- [ ] 顏色一律為 `var(--sem-*)` / `var(--tokens-*)` / `var(--colors-*)`，無硬編碼
- [ ] 版面依 12 欄網格，僅使用 span 12/8/6/4/3
- [ ] 垂直間距使用 `--sem-space-*`
- [ ] Drawer 寬度 720px（若有）
- [ ] 收合 Sidebar 時 tooltip 依規格顯示（150ms 淡入等）
- [ ] 互動狀態（hover、active、focus）已定義並使用 token

### 從 Figma 實作完成前必對

- [ ] 版面、對齊、間距與 Figma 一致
- [ ] 字型、字級、字重與設計系統一致
- [ ] 顏色皆使用 `var(--*)` token（.cursor/company-design-system/all-variables.css）
- [ ] 互動狀態（hover / active / disabled）已實作
- [ ] 素材路徑正確、不依賴未授權圖庫
- [ ] 無障礙基本要求已滿足（可聚焦、語意標籤等）

---

## 七、設計師使用方式

- 在 Cursor 中進行**公司產品**或**從 Figma 實作 UI** 時，請啟用本規則（**company-design-system**）。
- 製作 POC、admin、platform 時，一律依本規則與 `.cursor/company-design-system/` 資料夾內檔案執行。
- 細節與更新紀錄見 **`.cursor/company-design-system/README.md`** 與 **`Claude-design-system-updates-2026-02-20.md`**。
